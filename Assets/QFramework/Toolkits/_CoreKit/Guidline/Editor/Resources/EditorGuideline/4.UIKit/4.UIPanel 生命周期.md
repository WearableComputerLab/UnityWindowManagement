# QFramework 使用指南 2020（十八）：UI Kit（4）：UIPanel 生命周期
在前几篇，笔者创建了 UIHomePanel 界面，在此篇，我们来根据这个 UIHomePanel 介绍一下 UIPanel 的声明周期。

## UIPanel 生命周期

我们先看下  UIHomePanel 的代码，如下:
``` csharp
// ------------------------------------------------------------------------------
//  <autogenerated>
//      This code was generated by a tool.
//      Mono Runtime Version: 2.0.50727.1433
// 
//      Changes to this file may cause incorrect behavior and will be lost if 
//      the code is regenerated.
//  </autogenerated>
// ------------------------------------------------------------------------------

namespace QFramework.Example
{
    using System;
    using System.Collections;
    using System.Collections.Generic;
    using System.Linq;
    using UnityEngine;
    using UnityEngine.UI;
    
    
    public class UIHomePanelData : QFramework.UIPanelData
    {
    }
    
    public partial class UIHomePanel : QFramework.UIPanel
    {
        
        protected override void ProcessMsg(int eventId, QFramework.QMsg msg)
        {
            throw new System.NotImplementedException ();
        }
        
        protected override void OnInit(QFramework.IUIData uiData)
        {
            mData = uiData as UIHomePanelData ?? new UIHomePanelData();
            // please add init code here
            
            
        }
        
        protected override void OnOpen(QFramework.IUIData uiData)
        {
        }
        
        protected override void OnShow()
        {

        }
        
        protected override void OnHide()
        {
        }
        
        protected override void OnClose()
        {
        }
    }
}
```

默认的生命周期函数如下:
* ProcessMsg
* OnInit
* OnOpen
* OnShow
* OnHide
* OnClose

ProcessMsg 很简单，就是用来处理消息用的，UIKit 内置了一套模块化的消息机制，这部分内容将在下一篇进行介绍。

OnInit 则是在 UIPanel 所在的 prefab 初始化的时候进行调用的，在调用 UIKit.OpenPanel 时，只要在 UIKit 中没有对应的缓存界面时，就会调用一次 OnInit 这个周期。

OnOpen 就是每次 UIKit.OpenPanel 调用时，就会调用。

OnShow  实际上调用时机与 UIKit.OpenPanel 是一样的，只不过 OnShow 是最初版本遗留下拉的 API，所以就保留了。当然还有 UIMgr.ShowPanel 调用时，OnShow 会被调用

OnHide 则是在 UIKit.HidePanel 调用时，OnHide 会被调用。

最后 OnClose 就是在 UIKit.ClosePanel 调用时，就会触发，实际上 OnClose 相当于 OnDestory 这个周期。

大概就这些，其中 UIKit.OpenPanel 会触发资源的加载和初始化操作，而 UIKit.ClosePanel 则会触发卸载和销毁操作，这要记得这两点就好。

笔者基本上就只会用到 OnInit 和 OnClose 这些周期，偶尔会用一用 OnOpen，其它的包括 ProcessMsg 现在根本用不到了。

OK，此篇的内容就这些。
